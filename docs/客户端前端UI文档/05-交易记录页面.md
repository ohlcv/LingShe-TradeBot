# 交易记录页面

## 页面概述
交易记录页面展示用户所有策略的历史交易数据，包括开仓、平仓、止盈止损等操作的详细记录。用户可以在此页面查看、分析和导出交易历史，了解策略执行情况和交易绩效。

## 功能点
1. **交易列表**：展示所有交易操作的详细信息，包括时间、策略名称、交易对、方向、价格、数量等
2. **交易统计**：显示关键绩效指标，包括交易次数、交易总额、盈亏、盈亏率、胜率和平均盈亏
3. **多维度筛选**：
   - 时间范围选择：自定义起止日期
   - 关键词搜索：支持搜索策略名称、交易对等
   - 策略类型筛选：网格策略、趋势策略等
   - 交易所筛选：Binance、OKX等
   - 合约类型筛选：现货、合约
   - 持仓方向筛选：做多、做空
   - 开平类型筛选：开仓、平仓
   - 盈亏状态筛选：盈利、亏损
4. **交易详情**：通过展开行查看交易的详细信息和相关订单数据
5. **多选操作**：支持选择多条交易记录进行批量操作
6. **相关操作**：查看相关策略、查看交易所原始订单等

## 用户流程
1. 用户进入交易记录页面，默认加载最近30天的交易历史
2. 用户可以通过日期范围、关键词搜索和多种筛选器筛选特定交易记录
3. 用户可以查看页面顶部的交易统计指标，快速了解交易绩效
4. 用户可以点击任意交易行展开查看详细信息
5. 用户可以选择特定交易查看相关策略或交易所订单详情

## 线框图（基于实际截图）

```
+--------------------------------------------------------------+
|  [Logo] 灵蛇交易机器人     [设置/用户菜单]                    |
+--------------------------------------------------------------+
| [侧边栏]  |                                                  |
|          |  交易记录                       [全屏][刷新]      |
| 仪表盘    |  ------------------------------------------------ |
|          |  | [2023-03-03 - 2023-04-02] ⧭  [搜索交易记录...] | |
| 策略列表  |  ------------------------------------------------ |
|          |  | 策略类型▼ | 交易所▼ | 合约类型▼ | 持仓方向▼     | |
| 交易记录  |  | 开平▼     | 盈亏▼   |                         | |
|          |  ------------------------------------------------ |
| 风险管理  |                                                   |
|          |  +--------+ +--------+ +--------+ +--------+ +--------+ +--------+
| 账户设置  |  |交易次数 | |交易量  | |盈亏    | |盈亏率  | |胜率    | |均笔盈亏|
|          |  | 5      | |$18,998 | |+$94.78 | |+0.5%   | |20%     | |+$18.96 |
| 通知中心  |  +--------+ +--------+ +--------+ +--------+ +--------+ +--------+
|          |                                                   |
|          |  +--------------------------------------------------+
|          |  | □ | 时间           | 策略名称  | 交易对 | 类型 | 方向 | 价格 | 数量 | 价值 | 盈亏 |
|          |  |----------------------------------------------------|
|          |  | ▼ | 2023-05-20... | BTC网格.. | BTC/.. |[开仓]|[做多]|45678|0.25 |11415|$0.00|
|          |  |                                                |
|          |  |  +------------------------------------------+  |
|          |  |  | 交易ID: TX-001  [查看相关策略][查看交易所订单]  |
|          |  |  |                                          |  |
|          |  |  | 交易信息:                订单详情:        |  |
|          |  |  | 状态: [已完成]         订单ID: OR-78901  |  |
|          |  |  | 策略名称: BTC网格..     订单类型: 限价单   |  |
|          |  |  | 策略类型: 网格策略      数量: 0.25       |  |
|          |  |  | 交易所: Binance        价格: $11,419    |  |
|          |  |  | 交易对: BTC/USDT       价值: $...       |  |
|          |  |  | 开平: 开仓             手续费: $11.42    |  |
|          |  |  | 方向: 做多             系统费: $17.13    |  |
|          |  |  +------------------------------------------+  |
|          |  |                                                |
|          |  | □ | 2023-05-20... | ETH趋势.. | ETH/.. |[平仓]|[做多]|2345 |1.5  |3518 |+$120|
|          |  | □ | 2023-05-20... | BNB网格.. | BNB/.. |[开仓]|[做多]|325  |5    |1627 |$0.00|
|          |  | □ | 2023-05-19... | SOL趋势.. | SOL/.. |[平仓]|[做空]|178  |10   |1783 |-$25 |
|          |  | □ | 2023-05-19... | XRP长线.. | XRP/.. |[开仓]|[做多]|0.65 |1000 |650  |$0.00|
|          |  +--------------------------------------------------+
|          |                                                   |
|          |  [< 1 2 3 ... >]  共58条记录  每页显示: [10 ▼]    |
+----------+---------------------------------------------------+
```

## 交易统计卡片

```
+--------+ +--------+ +--------+ +--------+ +--------+ +--------+
|交易次数 | |交易量   | |盈亏    | |盈亏率   | |胜率    | |均笔盈亏|
| 5      | |$18,998 | |+$94.78 | |+0.5%   | |20%     | |+$18.96 |
+--------+ +--------+ +--------+ +--------+ +--------+ +--------+
```

## 筛选与搜索功能详解

### 时间范围筛选
- 使用日期范围选择器，默认加载最近30天交易记录
- 支持自定义起止日期范围
- 日期变更时自动刷新数据和统计信息

### 交易记录搜索
- 提供搜索框支持关键词搜索
- 关键词作用于策略名称、交易对、订单ID等字段
- 支持模糊匹配搜索

### 下拉筛选选项
1. **策略类型筛选**
   - 选项动态加载自系统中的策略类型
   - 包括全部策略类型、网格策略、趋势策略等

2. **交易所筛选**
   - 选项动态加载自系统中的交易所列表
   - 包括全部交易所、Binance、OKX等

3. **合约类型筛选**
   - 全部合约类型
   - 现货
   - 合约

4. **持仓方向筛选**
   - 全部持仓方向
   - 做多
   - 做空

5. **开平类型筛选**
   - 全部开平
   - 开仓
   - 平仓

6. **盈亏状态筛选**
   - 全部盈亏
   - 盈利
   - 亏损

## 交易详情展示

### 交易信息部分
- 交易ID与操作按钮
- 交易状态（已完成、处理中、失败等）
- 策略名称和类型
- 交易所和交易对
- 开平类型和持仓方向
- 触发原因和备注信息

### 订单详情部分
- 订单ID和订单类型
- 基础币数量和计价币数量
- 价值和张数（合约交易）
- 盈亏（带有颜色区分）
- 手续费和系统费

## 技术实现
- 组件路径: `src/views/transactions/TransactionRecords.vue`
- 使用Ant Design Vue的表格、卡片、日期选择器等组件
- 利用表格的展开行功能显示交易详情
- 使用Pinia状态管理从多个Store获取筛选选项数据
- 动态计算统计数据，包括盈亏率和胜率等指标

## 数据处理
- 交易记录默认按时间排序，支持切换排序方式
- 数字格式化处理，保留适当小数位
- 盈亏数据使用颜色区分（绿色为盈利，红色为亏损）
- 支持分页加载，默认每页10条记录

## 响应式设计
- 筛选工具栏在窄屏设备上自动换行
- 交易统计卡片在窄屏上等比例缩小
- 表格在窄屏上可水平滚动查看所有列
- 展开的详情行采用双列布局，在窄屏上转为单列

## 注意事项
1. 优化大量交易数据的加载性能，使用分页和按需加载
2. 确保复杂筛选条件组合时数据查询效率
3. 提供清晰的可视化指标展示交易绩效
4. 交易详情信息组织合理，重要信息优先展示
5. 考虑导出功能支持CSV/Excel格式，用于进一步分析 