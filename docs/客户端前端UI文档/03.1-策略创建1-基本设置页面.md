# 基本设置页面

## 页面概述
基本设置页面是创建交易策略的第一步，用户在此页面设置策略的基础信息，包括交易所、交易对、API密钥等核心参数。该页面为策略配置流程奠定基础，确保后续步骤能够基于正确的交易环境进行详细配置。

## 功能点
1. **策略步骤导航**：
   - 清晰展示当前处于策略创建的第1步
   - 显示完整的创建流程：基本设置→策略参数→策略风控→完成
   - 当前步骤高亮显示，已完成步骤显示勾选标记

2. **基础信息配置**：
   - 策略ID自动生成并显示（只读）
   - 策略名称设置
   - 交易对设置（基础币/计价币）
   - 交易所选择
   - API密钥选择（基于所选交易所筛选）

3. **交易参数设置**：
   - 产品类型选择（如现货、合约等）
   - 持仓方向选择（多头、空头）
   - 支持根据已输入的交易所和交易对自动生成策略名称

4. **策略类型选择**：
   - 以卡片形式展示可用的策略类型
   - 支持单选模式
   - 显示即将推出的策略（禁用状态）

## 用户流程
1. 用户进入创建策略页面
2. 系统自动生成策略ID
3. 用户填写/选择以下基本参数：
   - 策略名称（可手动输入或点击自动生成）
   - 交易对（BTC/USDT等）
   - 交易所（币安、OKX等）
   - API密钥（从已配置的密钥中选择）
   - 产品类型（现货、合约等）
   - 持仓方向（多头、空头）
4. 用户选择策略类型（网格策略、TV策略等）
5. 点击"下一步"进入策略参数配置页面

## 线框图

```
+--------------------------------------------------------------+
|                                                              |
|  +------------------------------------------------------+    |
|  |                     策略步骤导航                      |    |
|  | [1]基本设置 --> [2]策略参数 --> [3]策略风控 --> [4]完成 |    |
|  +------------------------------------------------------+    |
|                                                              |
|  创建新策略                                                  |
|                                                              |
|  +------------------------------------------------------+    |
|  | 策略ID:                                              |    |
|  | [ABCD1234]  (自动生成的唯一标识)                      |    |
|  +------------------------------------------------------+    |
|                                                              |
|  +------------------------+  +-------------------------+     |
|  | 策略名称:               |  | 交易对:                 |     |
|  | [BTC/USDT-现货-多]      |  | [BTC] / [USDT]         |     |
|  | (自动生成名称)          |  |                        |     |
|  +------------------------+  +-------------------------+     |
|                                                              |
|  +------------------------+  +-------------------------+     |
|  | 交易所:                 |  | API密钥:                |     |
|  | [币安]▼                  |  | [币安主账户]▼            |     |
|  |                        |  |                        |     |
|  +------------------------+  +-------------------------+     |
|                                                              |
|  +------------------------+  +-------------------------+     |
|  | 产品类型:               |  | 持仓方向:               |     |
|  | [现货]▼                  |  | [多头]▼                  |     |
|  |                        |  |                        |     |
|  +------------------------+  +-------------------------+     |
|                                                              |
|  策略类型:                                                   |
|  +----------------+  +----------------+  +----------------+  |
|  | 网格策略        |  | TV信号策略      |  | 跟单策略       |  |
|  | [选择]          |  |                |  | (敬请期待)     |  |
|  +----------------+  +----------------+  +----------------+  |
|                                                              |
|  +----------------+  +----------------+  +----------------+  |
|  | 马丁策略        |  | DCA策略        |  | 套利策略       |  |
|  | (敬请期待)      |  | (敬请期待)     |  | (敬请期待)     |  |
|  +----------------+  +----------------+  +----------------+  |
|                                                              |
|                                       [上一步] [下一步]      |
|                                                              |
+--------------------------------------------------------------+
```

## 技术实现
- 组件路径: `client/frontend/src/views/strategies/CreateStrategy.vue`
- 使用Vue 3的组合式API（Composition API）构建
- 使用Ant Design Vue的表单、卡片、单选框等组件
- 使用Vuex Store管理交易所、产品类型、持仓方向和策略类型等数据
- 利用路由参数传递策略信息到下一步

## 数据模型
```typescript
// 表单数据结构
interface FormState {
  strategyId: string;         // 策略ID，自动生成
  exchange: string;           // 交易所
  marketType: string;         // 产品类型
  direction: string;          // 持仓方向
  baseCurrency: string;       // 基础币
  quoteCurrency: string;      // 计价币
  strategyName: string;       // 策略名称
  strategyType: string;       // 策略类型
  apiKey: number | null;      // API密钥ID
}

// API密钥接口
interface ApiKey {
  id: number;
  exchange: string;           // 所属交易所
  name: string;               // 密钥名称
  apiKey: string;             // API Key
  secretKey: string;          // Secret Key
  passphrase: string;         // 密码短语（适用于某些交易所）
  description: string;        // 描述
  status: string;             // 状态，如"active"
}

// 策略类型接口
interface StrategyType {
  value: string;              // 策略类型值
  label: string;              // 策略类型显示名称
  description: string;        // 策略描述
  icon: Component;            // 策略图标组件
  active: boolean;            // 是否激活
}
```

## 交互逻辑
1. **策略ID生成**：
   - 页面加载时自动生成随机策略ID
   - 使用大写字母和数字组合，确保唯一性

2. **交易所选择**：
   - 从Store获取可用交易所列表
   - 选择交易所时自动筛选该交易所可用的API密钥
   - 清空当前选择的API密钥，避免无效选择

3. **自动生成策略名称**：
   - 用户可点击"自动生成名称"链接
   - 基于已输入的交易对、产品类型、持仓方向和交易所信息
   - 格式为"[基础币]/[计价币]-[产品类型]-[方向]-[交易所]"
   - 交易对发生变更时自动更新策略名称

4. **策略类型选择**：
   - 以卡片形式展示可选策略类型
   - 点击卡片选择相应策略类型
   - 对于未开放的策略类型，显示"敬请期待"标记
   - 点击未开放策略时显示提示消息

5. **表单验证**：
   - 所有必填字段必须填写
   - 点击下一步时进行表单验证
   - 验证失败时显示错误提示
   - 验证通过后根据选择的策略类型跳转到相应的参数配置页面

## 注意事项
1. **API密钥安全性**：
   - API密钥敏感信息（如secret key）应做部分遮蔽处理
   - 显示用于识别的名称和描述，不显示完整密钥

2. **导航逻辑**：
   - 点击"下一步"前进行数据验证
   - 基于选择的策略类型，跳转到不同的参数配置页面
   - 通过URL参数传递基本信息，确保各步骤间数据连贯性

3. **UI交互**：
   - 策略类型卡片使用高亮和选中效果提升用户体验
   - 表单项提供说明文字，增强可用性
   - 自动生成功能可减少用户输入，提升效率

4. **数据传递**：
   - 使用查询参数传递策略基本配置到下一步
   - 支持从参数页返回基本设置时保留已配置的参数
   - 支持重定向到特定策略类型的配置页面 