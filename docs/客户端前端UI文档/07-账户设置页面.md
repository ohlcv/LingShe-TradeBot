# 账户设置页面

## 页面概述
账户设置页面是用户管理个人账户信息、安全设置、API密钥和通知偏好的中央控制区域。通过这个页面，用户可以自定义交易平台体验、管理交易所连接以及配置系统通知方式，保障账户安全的同时获得个性化的使用体验。

## 功能点
1. **个人信息管理**：
   - 用户名展示（只读）
   - 昵称修改
   - 邮箱设置
   - 手机号码管理

2. **API密钥管理**：
   - 查看已添加的交易所API密钥
   - 添加新的API密钥
   - 启用/禁用现有密钥
   - 删除不需要的密钥

3. **安全设置**：
   - 密码修改
   - 双因素认证(2FA)设置
   - 登录提醒配置

4. **通知设置**：
   - 交易通知开关（订单执行或取消）
   - 风控预警通知开关（风控条件触发）
   - 系统公告通知开关（系统更新和维护）

## 用户流程
1. 用户进入账户设置页面
2. 通过标签页切换不同设置类别
3. 根据需要更新个人信息、API密钥、安全设置或通知偏好
4. 保存更改应用新设置
5. 敏感操作（如添加API密钥或修改密码）可能需要二次确认

## 线框图

```
+--------------------------------------------------------------+
|  [Logo] LingShe-TradeBot       [用户头像] ▼                  |
+--------------------------------------------------------------+
| [侧边栏]  |                                                  |
|          |  账户设置                                         |
|  仪表盘   |                                                   |
|          |  +----------+ +----------+ +----------+ +-------+ |
| 策略管理  |  | 个人信息  | | API管理   | | 安全设置  | |通知设置| |
|          |  +----------+ +----------+ +----------+ +-------+ |
| 交易记录  |                                                   |
|          |  个人信息                                          |
| 风险管理  |  ------------------------------------------------ |
|          |                                                   |
| 账户设置  |  用户名:                                          |
|          |  +----------------------------------------+        |
| 通知中心  |  | user123                              |        |
|          |  +----------------------------------------+        |
|          |                                                    |
|          |  昵称:                                            |
|          |  +----------------------------------------+        |
|          |  | 网格交易者                            |        |
|          |  +----------------------------------------+        |
|          |                                                    |
|          |  电子邮件:                                         |
|          |  +----------------------------------------+        |
|          |  | user@example.com                      |        |
|          |  +----------------------------------------+        |
|          |                                                    |
|          |  手机号码:                                         |
|          |  +----------------------------------------+        |
|          |  | 13800138000                           |        |
|          |  +----------------------------------------+        |
|          |                                                    |
|          |  [保存修改]                                        |
|          |                                                    |
+----------+----------------------------------------------------+
```

## API管理标签页

```
+--------------------------------------------------------------+
| API管理                                                      |
| ------------------------------------------------------------ |
|                                                              |
| API密钥列表                                [+ 添加API密钥]   |
|                                                              |
| +----------------+-----------+-------------+------+--------+ |
|                                                              | 交易所  | 名称       | API Key     | 状态 | 操作      |  |
| +----------------+-----------+-------------+------+--------+ |
|                                                              | Binance | 币安主账户 | 3a7d...6f5c | 启用 | 切换 删除 |  |
| +----------------+-----------+-------------+------+--------+ |
|                                                              | OKX     | OKX测试    | 7b6e...9d3a | 禁用 | 切换 删除 |  |
| +----------------+-----------+-------------+------+--------+ |
|                                                              |
+--------------------------------------------------------------+
```

## 安全设置标签页

```
+--------------------------------------------------------------+
|                                                              |
| 安全设置                                              |
| ----------------------------------------------------- |
|                                                       |
| +---------------------------------------------------+ |
|                                                       | 修改密码                                    [修改]  |
|                                                       | 定期更换密码可以提高账户安全性                      |
| +---------------------------------------------------+ |
|                                                       |
| +---------------------------------------------------+ |
|                                                       | 双因素认证                               [开关按钮] |
|                                                       | 启用双因素认证以提高账户安全性                      |
| +---------------------------------------------------+ |
|                                                       |
| +---------------------------------------------------+ |
|                                                       | 登录提醒                                 [开关按钮] |
|                                                       | 当有新设备登录账户时通过邮件通知                    |
| +---------------------------------------------------+ |
|                                                       |
+--------------------------------------------------------------+
```

## 通知设置标签页

```
+--------------------------------------------------------------+
|                                                              |
| 通知设置                                              |
| ----------------------------------------------------- |
|                                                       |
| +---------------------------------------------------+ |
|                                                       | 交易通知                                 [开关按钮] |
|                                                       | 当订单执行或取消时发送通知                          |
| +---------------------------------------------------+ |
|                                                       |
| +---------------------------------------------------+ |
|                                                       | 风控预警                                 [开关按钮] |
|                                                       | 当触发风控预警条件时发送通知                        |
| +---------------------------------------------------+ |
|                                                       |
| +---------------------------------------------------+ |
|                                                       | 系统公告                                 [开关按钮] |
|                                                       | 接收系统更新和维护通知                              |
| +---------------------------------------------------+ |
|                                                       |
+--------------------------------------------------------------+
```

## 添加API密钥弹窗

```
+--------------------------------------------------------------+
| 添加API密钥                                            [X] |
+--------------------------------------------------------------+
|                                                              |
| 交易所:                                                      |
| +----------------------------------------+                   |
| | 选择交易所                           ▼ |                   |
| +----------------------------------------+                   |
|                                                              |
| 名称:                                                        |
| +----------------------------------------+                   |
| | 输入名称                               |                   |
| +----------------------------------------+                   |
|                                                              |
| API Key:                                                     |
| +----------------------------------------+                   |
| | 输入API Key                            |                   |
| +----------------------------------------+                   |
|                                                              |
| Secret Key:                                                  |
| +----------------------------------------+                   |
| | ••••••••••••••••••                     |                   |
| +----------------------------------------+                   |
|                                                              |
| Passphrase:                                                  |
| +----------------------------------------+                   |
| | ••••••••••••••••••                     |                   |
| +----------------------------------------+                   |
| 部分交易所（如Bitget）需要设置Passphrase                       |
|                                                              |
| 描述:                                                        |
| +----------------------------------------+                   |
| | 可选描述                               |                   |
| +----------------------------------------+                   |
|                                                              |
| [取消]                                            [确定]     |
+--------------------------------------------------------------+
```

## 修改密码弹窗

```
+--------------------------------------------------------------+
| 修改密码                                               [X] |
+--------------------------------------------------------------+
|                                                              |
| 当前密码:                                                    |
| +----------------------------------------+                   |
| | ••••••••••••••••••                     |                   |
| +----------------------------------------+                   |
|                                                              |
| 新密码:                                                      |
| +----------------------------------------+                   |
| | ••••••••••••••••••                     |                   |
| +----------------------------------------+                   |
|                                                              |
| 确认新密码:                                                  |
| +----------------------------------------+                   |
| | ••••••••••••••••••                     |                   |
| +----------------------------------------+                   |
|                                                              |
| [取消]                                            [确定]     |
+--------------------------------------------------------------+
```

## 技术实现
- 组件路径: `client/frontend/src/views/account/AccountSettings.vue`
- 使用Vue 3的组合式API（Composition API）
- 使用Ant Design Vue组件库实现界面元素
- 使用标签页（Tabs）组织不同类别的设置
- 通过模态框处理API密钥添加和密码修改等功能

## 数据模型
```typescript
// 用户信息数据模型
interface UserInfo {
  username: string;     // 用户名（不可修改）
  nickname: string;     // 昵称
  email: string;        // 邮箱
  phone: string;        // 手机号
}

// API密钥数据模型
interface ApiKey {
  id: number;
  exchange: string;     // 交易所
  name: string;         // 密钥名称
  apiKey: string;       // API Key（显示时部分隐藏）
  secretKey: string;    // Secret Key（显示时隐藏）
  passphrase: string;   // 密码短语（部分交易所需要）
  description: string;  // 描述
  status: 'active' | 'inactive';  // 状态：启用/禁用
}

// 安全设置数据模型
interface SecuritySettings {
  twoFactorEnabled: boolean;  // 是否启用双因素认证
  loginAlert: boolean;        // 是否启用登录提醒
}

// 通知设置数据模型
interface NotificationSettings {
  tradeNotification: boolean;    // 交易通知
  riskAlert: boolean;            // 风控预警
  systemAnnouncement: boolean;   // 系统公告
}
```

## 交互逻辑
1. **个人信息管理**：
   - 用户信息自动加载到表单中
   - 用户名为只读字段，其他信息可编辑
   - 点击"保存修改"按钮提交更改

2. **API密钥管理**：
   - 表格展示所有已添加的API密钥，包括交易所、名称和状态
   - 敏感信息（如API Key）部分隐藏（使用星号替代）
   - 添加新密钥通过模态窗口，包含必要字段验证
   - 可通过开关按钮快速启用/禁用API密钥
   - 可删除不需要的API密钥

3. **安全设置**：
   - 密码修改通过弹窗进行，要求输入当前密码和新密码确认
   - 双因素认证和登录提醒通过开关按钮控制

4. **通知设置**：
   - 各类通知设置通过开关按钮控制，实时保存
   - 交易通知：控制订单执行和取消等交易相关通知
   - 风控预警：控制风险控制条件触发时的通知
   - 系统公告：控制系统更新、维护等重要信息通知

## 通知设置详情
系统支持以下通知设置选项，用户可以根据自己的需求灵活配置：

1. **交易通知**：
   - 开启后接收订单执行通知
   - 接收订单取消通知
   - 接收交易完成通知
   - 接收止盈止损触发通知

2. **风控预警**：
   - 接收风控条件触发预警
   - 接收策略风险度超标提醒
   - 接收市场异常波动警报
   - 接收资产安全预警信息

3. **系统公告**：
   - 接收系统更新通知
   - 接收维护计划通知
   - 接收功能变更通知
   - 接收重要安全提醒

这些通知可通过平台内消息、邮件等方式接收，确保用户及时了解平台和交易的最新状态。

## 注意事项
1. **API密钥安全性**：
   - API密钥信息需采取加密存储
   - 展示时部分隐藏密钥信息，防止泄露
   - 添加时提醒用户不要设置提币权限，仅需交易权限

2. **密码安全**：
   - 更改密码时验证当前密码
   - 新密码需符合安全要求（组合复杂度、长度）
   - 密码传输需加密处理

3. **通知设置**：
   - 默认开启重要通知（如风控预警）
   - 保留用户通知偏好设置
   - 关键安全通知（如异常登录）不可完全关闭

4. **响应式设计**：
   - 适配不同屏幕尺寸的设备
   - 确保表单在移动设备上易于操作

5. **数据验证**：
   - 对输入的邮箱、手机号进行格式验证
   - API密钥格式验证
   - 新密码强度检查 